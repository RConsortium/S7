<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Proposal â€¢ S7</title>
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../../deps/headroom-0.11.0/headroom.min.js"></script><script src="../../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../../deps/search-1.0.0/fuse.min.js"></script><script src="../../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><meta property="og:title" content="Proposal">
<meta name="description" content="Proposal to RConsortium to create the working group.">
<meta property="og:description" content="Proposal to RConsortium to create the working group.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../../index.html">S7</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../../articles/S7.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../../articles/generics-methods.html">Generics and methods</a></li>
    <li><a class="dropdown-item" href="../../articles/classes-objects.html">Classes and objects</a></li>
    <li><a class="dropdown-item" href="../../articles/compatibility.html">Compatibility with S3 and S4</a></li>
    <li><a class="dropdown-item" href="../../articles/packages.html">Using S7 in a package</a></li>
    <li><a class="dropdown-item" href="../../articles/motivation.html">Motivation for S7</a></li>
    <li><a class="dropdown-item" href="../../articles/performance.html">Performance</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news">
<li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2024/11/s7-0-2-0/">S7 0.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://blog.r-project.org/2024/05/17/generalizing-support-for-functional-oop-in-r/index.html">S7 0.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../../news/index.html">Changelog</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RConsortium/S7/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Proposal</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/RConsortium/S7/blob/main/vignettes/spec/proposal.Rmd" class="external-link"><code>vignettes/spec/proposal.Rmd</code></a></small>
      <div class="d-none name"><code>proposal.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="executive-summary">Executive summary<a class="anchor" aria-label="anchor" href="#executive-summary"></a>
</h2>
<p>Object-oriented programming enables R developers to implement
abstractions, introduce domain-specific data models, and interface with
external systems, among other things. Unlike other modern programming
languages, R lacks a dominant approach to object-oriented programming.
The competition between existing approaches is unproductive and
contributes to social fragmentation of the community and technical
hurdles when integrating across different systems.</p>
<p>We propose to form a working group that will develop a design
proposal for a system that will combine the most important elements from
the existing approaches while remaining compatible with them. We will
involve key technical experts and community stakeholders, including R
Core and the tidyverse. Upon publishing the design proposal, we will
invite the entire community to contribute feedback. Finally, we will
conclude the working group by developing and releasing a strategy for
implementing, maintaining, and adopting the framework.</p>
</div>
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>In R, everything is an object. That principle facilitates interacting
with data, because a dataset is modeled as a tangible, real world
object. The user can display the contents of an object, introspect its
structure and manipulate it in various ways.</p>
<p>R provides all of the basic types of objects necessary for
statistical computing. To more effectively reason about a domain, like
genomics, we need to specialize the data types to more richly model the
semantics particular to that domain. Once we have a specialized set of
data structures, we recognize the need for /abstraction/, which models
commonality across data types. Abstraction is also useful for existing
data types, where a package could provide an alternative implementation,
for example, based on a database or distributed computing system.
Abstraction requires a system of classification, where each object
corresponds to a specific class, and each class derives from another.
The classification system transcends the class instances (the objects),
and it is helpful to explicitly refer to classes when programming.</p>
<p>Fundamentally, a class-based object-oriented system has two
requirements: * There is a centrally defined class hierarchy, and *
Every object is an instance of a class.</p>
<p>A class is defined by the contract governing its structure and
contents. The contract extends the contract of the parent class in order
to add semantics through additional constraints while remaining
compatible with the parent contract. Code manipulating objects will
often make assumptions about the structure and content of objects. To
mitigate risk, such low-level code benefits from a validation function,
essentially a codification of the class contract, to verify its
assumptions.</p>
<p>While there is intrinsic value in formal modeling of data, for
software to fully take advantage of the richer semantics, it requires
/polymorphism/, where the behavior of the software with respect to an
object depends on the class of the object.</p>
<p>Most object-oriented languages implement message-passing OOP, where
classes define their own behavior by holding functions, called methods,
in addition to fields. When one class calls a method in another class,
it passes a message.</p>
<p>R has a few systems based on message-passing, most notably the R6
package and reference classes in the methods package. These rely on
message-passing in part because their objects are mutable and it is
easier to reason about code when we can typically assume that it is the
receiver being mutated. We exclude from our scope systems with mutable
objects, because immutable objects are generally preferable for
interactive data analysis, relegating mutable systems to niche
applications, such as GUIs and caching mechanisms.</p>
<p>As appropriate for a statistical computing language, R has functional
roots, and the most prevalent object-oriented approaches in R are
functional systems, namely S3 and S4, corresponding to the third and
fourth version of the S language, respectively. Objects tend to be
immutable, and top-level functions can be generic, which means means
they dispatch to another function, called a method, based on the types
of the passed arguments. The simplest type of generic dispatches on a
single argument. While single dispatch supports most applications of
polymorphism, there are many cases where the behavior depends on the
interaction of two or more classes. Typical examples include arithmetic,
converting an object from one class to another and combining two
different types of object.</p>
<p>From these considerations, we conclude that a good object-oriented
system would support: * An explicit class hierarchy (represented by
reified objects) with * Systematic instance construction and validation;
* Multiple, at least double, dispatch, and * Objects with a transparent,
introspectable structure.</p>
</div>
<div class="section level2">
<h2 id="problem-statement">Problem statement<a class="anchor" aria-label="anchor" href="#problem-statement"></a>
</h2>
<p>The two major OOP frameworks in R, S3 and S4, each have their own
limitations, with neither one being sufficiently applicable to gain
dominance. This had led to social fracturing in the community and
technical impediments to compatibility and interoperability. We
summarize those limitations in the table below.</p>
<table class="table">
<colgroup>
<col width="29%">
<col width="47%">
<col width="23%">
</colgroup>
<thead><tr class="header">
<th>S3 limitations</th>
<th>S4 limitations</th>
<th>S4 implementation issues</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Classes are only implicit</td>
<td>Multiple inheritance and dispatch hard to understand</td>
<td>Poor performance</td>
</tr>
<tr class="even">
<td>No systematic object validation</td>
<td>Syntax is unusual (side effects)</td>
<td>Difficult to maintain</td>
</tr>
<tr class="odd">
<td>Single dispatch only</td>
<td>Lack of transparency of object structure and methods</td>
<td></td>
</tr>
</tbody>
</table>
<p>S3 defines classes implicitly at the instance level, so there is no
explicit class hierarchy. While the S3 system supports tracking the
class of every object, there is no systematic means of constructing and
validating them to ensure correctness. S3 only supports single dispatch,
so it is difficult to write polymorphic code for arithmetic, merging
objects, converting objects, etc.</p>
<p>S4 has solutions to all of those problems, but it is quite ambitious,
introducing significant complexity, unusual syntax and loss of
transparency. Multiple inheritance, while expressive and powerful,
allows for multiple overlapping taxonomies, which is difficult to reason
about, and the difficulty increases quadratically when combined with
multiple dispatch, where method selection uses a distance calculation in
/n/ dimensions where /n/ is the number of arguments. The syntax for
defining classes and methods is non-idiomatic and relies on side
effects. Finally, the S4 convention (although not a requirement) is to
hide slots behind an API, which improves encapsulation but prevents the
basic introspection capabilities that are desirable when analyzing data
and that R users have come to expect.</p>
<p>Somewhat tangentionally, but still motivating, there are also
technical issues with the methods package, the only implementation of
the S4 system. Its incremental growth over the decades has led to
excessive complexity, as well as performance issues. In the absence of a
new system, we would need to reimplement S4, so there will be
implementation effort regardless.</p>
<p>Documentation limitations afflict both S3 and S4. It is difficult to
describe a programming interface when it consists of generic functions
not coupled to each other or any class. Any package can define a method
on a generic or extend a class, so the documentation needs to adapt
according to which packages are loaded.</p>
</div>
<div class="section level2">
<h2 id="proposal">Proposal<a class="anchor" aria-label="anchor" href="#proposal"></a>
</h2>
<p>We believe there may be a better way, but the solutions are not
obvious. Across popular programming languages, with the notable
exception of Julia, functional OOP is much less common and less well
developed than message-passing, so there are few examples for R to
follow and any advances will likely require research. Therefore, we
propose to bring together a panel of experts to more formally assess the
situation and design a solution. Since we are aiming for this solution
to unify the community, we aim for widespread adoption, which will
require involvement by key community leaders. We will invite the
community to review the proposal and to contribute feedback and ideas.
The working group will integrate the feedback and finalize the proposal.
It will conclude after developing a strategy for implementation,
adoption and long-term maintenance, for which it will not be directly
responsible.</p>
<p>No funding is required nor requested for this effort.</p>
</div>
<div class="section level2">
<h2 id="objectives">Objectives<a class="anchor" aria-label="anchor" href="#objectives"></a>
</h2>
<ul>
<li>Release a finalized design specification for a unifying
object-oriented programming system,</li>
<li>Recommend to the ISC a strategy for implementing and maintaining the
system, as well as driving its adoption.</li>
</ul>
</div>
<div class="section level2">
<h2 id="milestones">Milestones<a class="anchor" aria-label="anchor" href="#milestones"></a>
</h2>
<ul>
<li>Finalize membership,</li>
<li>Agree upon and prioritize system requirements,</li>
<li>Iterate through design proposals,</li>
<li>Release a proposal for community review and contribution,</li>
<li>Incorporate community contributions,</li>
<li>Submit the finalized proposal,</li>
<li>Develop and submit the implementation and adoption strategy.</li>
</ul>
</div>
<div class="section level2">
<h2 id="membership">Membership<a class="anchor" aria-label="anchor" href="#membership"></a>
</h2>
<p>The founding members are:</p>
<ul>
<li>Michael Lawrence :: Representing R-core and (S4-based) Bioconductor,
and a maintainer of the methods package;</li>
<li>Hadley Wickham :: Representing RStudio and the tidyverse project,
which relies heavily on S3;</li>
<li>Martin Maechler :: Representing R-core, maintainer of the S4-based
Matrix and Rmpfr packages, and a maintainer of the methods package.</li>
</ul>
<p>We have also invited representatives from the R Ladies and ROpenSci
communities. We will collaborate with others in R Core, keeping them
informed of our plans and incorporating any feedback.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Davis Vaughan, Jim Hester, Tomasz Kalinowski, Will Landau, Michael Lawrence, Martin Maechler, Luke Tierney, Hadley Wickham.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>

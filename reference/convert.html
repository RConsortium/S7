<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Convert an object from one type to another — convert • S7</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert an object from one type to another — convert"><meta name="description" content="convert(from, to) is a built-in generic for converting an object from
one type to another. It is special in three ways:
It uses double-dispatch, because conversion depends on both from and
to.
It uses non-standard dispatch because to is a class, not an object.
It doesn't use inheritance for the to argument. To understand
why, imagine you have written methods to objects of various types to
classParent. If you then create a new classChild that inherits from
classParent, you can't expect the methods written for classParent
to work because those methods will return classParent objects, not
classChild objects.


convert() provides two default implementations:
When from inherits from to, it strips any properties that from
possesses that to does not (downcasting).
When to is a subclass of from's class, it creates a new object of
class to, copying over existing properties from from and initializing
new properties of to (upcasting).


If you are converting an object solely for the purposes of accessing a method
on a superclass, you probably want super() instead. See its docs for more
details.
S3 &amp;amp; S4


convert() plays a similar role to the convention of defining as.foo()
functions/generics in S3, and to as()/setAs() in S4.

"><meta property="og:description" content="convert(from, to) is a built-in generic for converting an object from
one type to another. It is special in three ways:
It uses double-dispatch, because conversion depends on both from and
to.
It uses non-standard dispatch because to is a class, not an object.
It doesn't use inheritance for the to argument. To understand
why, imagine you have written methods to objects of various types to
classParent. If you then create a new classChild that inherits from
classParent, you can't expect the methods written for classParent
to work because those methods will return classParent objects, not
classChild objects.


convert() provides two default implementations:
When from inherits from to, it strips any properties that from
possesses that to does not (downcasting).
When to is a subclass of from's class, it creates a new object of
class to, copying over existing properties from from and initializing
new properties of to (upcasting).


If you are converting an object solely for the purposes of accessing a method
on a superclass, you probably want super() instead. See its docs for more
details.
S3 &amp;amp; S4


convert() plays a similar role to the convention of defining as.foo()
functions/generics in S3, and to as()/setAs() in S4.

"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">S7</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/S7.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/generics-methods.html">Generics and methods</a></li>
    <li><a class="dropdown-item" href="../articles/classes-objects.html">Classes and objects</a></li>
    <li><a class="dropdown-item" href="../articles/compatibility.html">Compatibility with S3 and S4</a></li>
    <li><a class="dropdown-item" href="../articles/packages.html">Using S7 in a package</a></li>
    <li><a class="dropdown-item" href="../articles/motivation.html">Motivation for S7</a></li>
    <li><a class="dropdown-item" href="../articles/performance.html">Performance</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rconsortium/S7/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Convert an object from one type to another</h1>
      <small class="dont-index">Source: <a href="https://github.com/rconsortium/S7/blob/main/R/convert.R" class="external-link"><code>R/convert.R</code></a></small>
      <div class="d-none name"><code>convert.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>convert(from, to)</code> is a built-in generic for converting an object from
one type to another. It is special in three ways:</p><ul><li><p>It uses double-dispatch, because conversion depends on both <code>from</code> and
<code>to</code>.</p></li>
<li><p>It uses non-standard dispatch because <code>to</code> is a class, not an object.</p></li>
<li><p>It doesn't use inheritance for the <code>to</code> argument. To understand
why, imagine you have written methods to objects of various types to
<code>classParent</code>. If you then create a new <code>classChild</code> that inherits from
<code>classParent</code>, you can't expect the methods written for <code>classParent</code>
to work because those methods will return <code>classParent</code> objects, not
<code>classChild</code> objects.</p></li>
</ul><p><code>convert()</code> provides two default implementations:</p><ol><li><p>When <code>from</code> inherits from <code>to</code>, it strips any properties that <code>from</code>
possesses that <code>to</code> does not (downcasting).</p></li>
<li><p>When <code>to</code> is a subclass of <code>from</code>'s class, it creates a new object of
class <code>to</code>, copying over existing properties from <code>from</code> and initializing
new properties of <code>to</code> (upcasting).</p></li>
</ol><p>If you are converting an object solely for the purposes of accessing a method
on a superclass, you probably want <code><a href="super.html">super()</a></code> instead. See its docs for more
details.</p><div class="section">
<h3 id="s-amp-s-">S3 &amp; S4<a class="anchor" aria-label="anchor" href="#s-amp-s-"></a></h3>


<p><code>convert()</code> plays a similar role to the convention of defining <code>as.foo()</code>
functions/generics in S3, and to <code>as()</code>/<code>setAs()</code> in S4.</p>
</div>

    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">convert</span><span class="op">(</span><span class="va">from</span>, <span class="va">to</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-from">from<a class="anchor" aria-label="anchor" href="#arg-from"></a></dt>
<dd><p>An S7 object to convert.</p></dd>


<dt id="arg-to">to<a class="anchor" aria-label="anchor" href="#arg-to"></a></dt>
<dd><p>An S7 class specification, passed to <code><a href="as_class.html">as_class()</a></code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other arguments passed to custom <code>convert()</code> methods. For upcasting,
these can be used to override existing properties or set new ones.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Either <code>from</code> coerced to class <code>to</code>, or an error if the coercion
is not possible.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">foo1</span> <span class="op">&lt;-</span> <span class="fu"><a href="new_class.html">new_class</a></span><span class="op">(</span><span class="st">"foo1"</span>, properties <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">class_integer</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">foo2</span> <span class="op">&lt;-</span> <span class="fu"><a href="new_class.html">new_class</a></span><span class="op">(</span><span class="st">"foo2"</span>, <span class="va">foo1</span>, properties <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">class_double</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Downcasting: S7 provides a default implementation for coercing an object</span></span></span>
<span class="r-in"><span><span class="co"># to one of its parent classes:</span></span></span>
<span class="r-in"><span><span class="fu">convert</span><span class="op">(</span><span class="fu">foo2</span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1L</span>, y <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>, to <span class="op">=</span> <span class="va">foo1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;foo1&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  @ x: int 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Upcasting: S7 also provides a default implementation for coercing an object</span></span></span>
<span class="r-in"><span><span class="co"># to one of its child classes:</span></span></span>
<span class="r-in"><span><span class="fu">convert</span><span class="op">(</span><span class="fu">foo1</span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span>, to <span class="op">=</span> <span class="va">foo2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;foo2&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  @ x: int 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  @ y: num(0) </span>
<span class="r-in"><span><span class="fu">convert</span><span class="op">(</span><span class="fu">foo1</span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span>, to <span class="op">=</span> <span class="va">foo2</span>, y <span class="op">=</span> <span class="fl">2.5</span><span class="op">)</span>  <span class="co"># Set new property</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;foo2&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  @ x: int 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  @ y: num 2.5</span>
<span class="r-in"><span><span class="fu">convert</span><span class="op">(</span><span class="fu">foo1</span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span>, to <span class="op">=</span> <span class="va">foo2</span>, x <span class="op">=</span> <span class="fl">2L</span>, y <span class="op">=</span> <span class="fl">2.5</span><span class="op">)</span>  <span class="co"># Override existing and set new</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;foo2&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  @ x: int 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  @ y: num 2.5</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For all other cases, you'll need to provide your own.</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu">convert</span><span class="op">(</span><span class="fu">foo1</span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span>, to <span class="op">=</span> <span class="va">class_integer</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error : Can't find method for generic `convert()` with dispatch classes:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - from: &lt;foo1&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - to  : &lt;integer&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="method.html">method</a></span><span class="op">(</span><span class="va">convert</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">foo1</span>, <span class="va">class_integer</span><span class="op">)</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">from</span>, <span class="va">to</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">from</span><span class="op">@</span><span class="va">x</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="fu">convert</span><span class="op">(</span><span class="fu">foo1</span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span>, to <span class="op">=</span> <span class="va">class_integer</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Note that conversion does not respect inheritance so if we define a</span></span></span>
<span class="r-in"><span><span class="co"># convert method for integer to foo1</span></span></span>
<span class="r-in"><span><span class="fu"><a href="method.html">method</a></span><span class="op">(</span><span class="va">convert</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">class_integer</span>, <span class="va">foo1</span><span class="op">)</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">from</span>, <span class="va">to</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">foo1</span><span class="op">(</span>x <span class="op">=</span> <span class="va">from</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="fu">convert</span><span class="op">(</span><span class="fl">1L</span>, to <span class="op">=</span> <span class="va">foo1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;foo1&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  @ x: int 1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Converting to foo2 will still error</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu">convert</span><span class="op">(</span><span class="fl">1L</span>, to <span class="op">=</span> <span class="va">foo2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error : Can't find method for generic `convert()` with dispatch classes:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - from: &lt;integer&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - to  : &lt;foo2&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span><span class="co"># This is probably not surprising because foo2 also needs some value</span></span></span>
<span class="r-in"><span><span class="co"># for `@y`, but it definitely makes dispatch for convert() special</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Davis Vaughan, Jim Hester, Tomasz Kalinowski, Will Landau, Michael Lawrence, Martin Maechler, Luke Tierney, Hadley Wickham.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>


<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Define a new S7 class — new_class • S7</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Define a new S7 class — new_class"><meta name="description" content='A class specifies the properties (data) that each of its objects will
possess. The class, and its parent, determines which method will be used
when an object is passed to a generic.
Learn more in vignette("classes-objects")'><meta property="og:description" content='A class specifies the properties (data) that each of its objects will
possess. The class, and its parent, determines which method will be used
when an object is passed to a generic.
Learn more in vignette("classes-objects")'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">S7</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/S7.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/generics-methods.html">Generics and methods</a></li>
    <li><a class="dropdown-item" href="../articles/classes-objects.html">Classes and objects</a></li>
    <li><a class="dropdown-item" href="../articles/compatibility.html">Compatibility with S3 and S4</a></li>
    <li><a class="dropdown-item" href="../articles/packages.html">Using S7 in a package</a></li>
    <li><a class="dropdown-item" href="../articles/motivation.html">Motivation for S7</a></li>
    <li><a class="dropdown-item" href="../articles/performance.html">Performance</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-news" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">News</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-news"><li><h6 class="dropdown-header" data-toc-skip>Releases</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.tidyverse.org/blog/2024/11/s7-0-2-0/">S7 0.2.0</a></li>
    <li><a class="external-link dropdown-item" href="https://blog.r-project.org/2024/05/17/generalizing-support-for-functional-oop-in-r/index.html">S7 0.1.0</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../news/index.html">Changelog</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/RConsortium/S7/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Define a new S7 class</h1>
      <small class="dont-index">Source: <a href="https://github.com/RConsortium/S7/blob/main/R/class.R" class="external-link"><code>R/class.R</code></a></small>
      <div class="d-none name"><code>new_class.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A class specifies the properties (data) that each of its objects will
possess. The class, and its parent, determines which method will be used
when an object is passed to a generic.</p>
<p>Learn more in <code><a href="../articles/classes-objects.html">vignette("classes-objects")</a></code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">new_class</span><span class="op">(</span></span>
<span>  <span class="va">name</span>,</span>
<span>  parent <span class="op">=</span> <span class="va">S7_object</span>,</span>
<span>  package <span class="op">=</span> <span class="fu">topNamespaceName</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  properties <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  abstract <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  constructor <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  validator <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">new_object</span><span class="op">(</span><span class="va">.parent</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-name">name<a class="anchor" aria-label="anchor" href="#arg-name"></a></dt>
<dd><p>The name of the class, as a string. The result of calling
<code>new_class()</code> should always be assigned to a variable with this name,
i.e. <code>Foo &lt;- new_class("Foo")</code>.</p></dd>


<dt id="arg-parent">parent<a class="anchor" aria-label="anchor" href="#arg-parent"></a></dt>
<dd><p>The parent class to inherit behavior from.
There are three options:</p><ul><li><p>An S7 class, like <a href="S7_object.html">S7_object</a>.</p></li>
<li><p>An S3 class wrapped by <code><a href="new_S3_class.html">new_S3_class()</a></code>.</p></li>
<li><p>A base type, like <a href="base_classes.html">class_logical</a>, <a href="base_classes.html">class_integer</a>, etc.</p></li>
</ul></dd>


<dt id="arg-package">package<a class="anchor" aria-label="anchor" href="#arg-package"></a></dt>
<dd><p>Package name. This is automatically resolved if the class is
defined in a package, and <code>NULL</code> otherwise.</p>
<p>Note, if the class is intended for external use, the constructor should be
exported. Learn more in <code><a href="../articles/packages.html">vignette("packages")</a></code>.</p></dd>


<dt id="arg-properties">properties<a class="anchor" aria-label="anchor" href="#arg-properties"></a></dt>
<dd><p>A named list specifying the properties (data) that
belong to each instance of the class. Each element of the list can
either be a type specification (processed by <code><a href="as_class.html">as_class()</a></code>) or a
full property specification created <code><a href="new_property.html">new_property()</a></code>.</p></dd>


<dt id="arg-abstract">abstract<a class="anchor" aria-label="anchor" href="#arg-abstract"></a></dt>
<dd><p>Is this an abstract class? An abstract class can not be
instantiated.</p></dd>


<dt id="arg-constructor">constructor<a class="anchor" aria-label="anchor" href="#arg-constructor"></a></dt>
<dd><p>The constructor function. In most cases, you can rely
on the default constructor, which will generate a function with one
argument for each property.</p>
<p>A custom constructor should call <code>new_object()</code> to create the S7 object.
The first argument, <code>.data</code>, should be an instance of the parent class
(if used). The subsequent arguments are used to set the properties.</p></dd>


<dt id="arg-validator">validator<a class="anchor" aria-label="anchor" href="#arg-validator"></a></dt>
<dd><p>A function taking a single argument, <code>self</code>, the object
to validate.</p>
<p>The job of a validator is to determine whether the object is valid,
i.e. if the current property values form an allowed combination. The
types of the properties are always automatically validated so the job of
the validator is to verify that the <em>values</em> of individual properties are
ok (i.e. maybe a property should have length 1, or should always be
positive), or that the <em>combination</em> of values of multiple properties is ok.
It is called after construction and whenever any property is set.</p>
<p>The validator should return <code>NULL</code> if the object is valid. If not, it
should return a character vector where each element describes a single
problem, using <code>@prop_name</code> to describe where the problem lies.</p>
<p>See <code><a href="validate.html">validate()</a></code> for more details, examples, and how to temporarily
suppress validation when needed.</p></dd>


<dt id="arg--parent-">.parent, ...<a class="anchor" aria-label="anchor" href="#arg--parent-"></a></dt>
<dd><p>Parent object and named properties used to construct the
object.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A object constructor, a function that can be used to create objects
of the given class.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create an class that represents a range using a numeric start and end</span></span></span>
<span class="r-in"><span><span class="va">Range</span> <span class="op">&lt;-</span> <span class="fu">new_class</span><span class="op">(</span><span class="st">"Range"</span>,</span></span>
<span class="r-in"><span>  properties <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    start <span class="op">=</span> <span class="va">class_numeric</span>,</span></span>
<span class="r-in"><span>    end <span class="op">=</span> <span class="va">class_numeric</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu">Range</span><span class="op">(</span>start <span class="op">=</span> <span class="fl">10</span>, end <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">r</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;Range&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  @ start: num 10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  @ end  : num 20</span>
<span class="r-in"><span><span class="co"># get and set properties with @</span></span></span>
<span class="r-in"><span><span class="va">r</span><span class="op">@</span><span class="va">start</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 10</span>
<span class="r-in"><span><span class="va">r</span><span class="op">@</span><span class="va">end</span> <span class="op">&lt;-</span> <span class="fl">40</span></span></span>
<span class="r-in"><span><span class="va">r</span><span class="op">@</span><span class="va">end</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 40</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># S7 automatically ensures that properties are of the declared types:</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu">Range</span><span class="op">(</span>start <span class="op">=</span> <span class="st">"hello"</span>, end <span class="op">=</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error : &lt;Range&gt; object properties are invalid:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - @start must be &lt;integer&gt; or &lt;double&gt;, not &lt;character&gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># But we might also want to use a validator to ensure that start and end</span></span></span>
<span class="r-in"><span><span class="co"># are length 1, and that start is &lt; end</span></span></span>
<span class="r-in"><span><span class="va">Range</span> <span class="op">&lt;-</span> <span class="fu">new_class</span><span class="op">(</span><span class="st">"Range"</span>,</span></span>
<span class="r-in"><span>  properties <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    start <span class="op">=</span> <span class="va">class_numeric</span>,</span></span>
<span class="r-in"><span>    end <span class="op">=</span> <span class="va">class_numeric</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  validator <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">self</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">self</span><span class="op">@</span><span class="va">start</span><span class="op">)</span> <span class="op">!=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="st">"@start must be a single number"</span></span></span>
<span class="r-in"><span>    <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">self</span><span class="op">@</span><span class="va">end</span><span class="op">)</span> <span class="op">!=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="st">"@end must be a single number"</span></span></span>
<span class="r-in"><span>    <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">self</span><span class="op">@</span><span class="va">end</span> <span class="op">&lt;</span> <span class="va">self</span><span class="op">@</span><span class="va">start</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="st">"@end must be great than or equal to @start"</span></span></span>
<span class="r-in"><span>    <span class="op">}</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu">Range</span><span class="op">(</span>start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">15</span><span class="op">)</span>, end <span class="op">=</span> <span class="fl">20</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error : &lt;Range&gt; object is invalid:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - @start must be a single number</span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu">Range</span><span class="op">(</span>start <span class="op">=</span> <span class="fl">20</span>, end <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error : &lt;Range&gt; object is invalid:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - @end must be great than or equal to @start</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">r</span> <span class="op">&lt;-</span> <span class="fu">Range</span><span class="op">(</span>start <span class="op">=</span> <span class="fl">10</span>, end <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="va">r</span><span class="op">@</span><span class="va">start</span> <span class="op">&lt;-</span> <span class="fl">25</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Error : &lt;Range&gt; object is invalid:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - @end must be great than or equal to @start</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Davis Vaughan, Jim Hester, Tomasz Kalinowski, Will Landau, Michael Lawrence, Martin Maechler, Luke Tierney, Hadley Wickham.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>


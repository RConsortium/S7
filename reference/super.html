<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Force method dispatch to use a superclass — super • S7</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Force method dispatch to use a superclass — super"><meta name="description" content="super(from, to) causes the dispatch for the next generic to use the method
for the superclass to instead of the actual class of from. It's needed
when you want to implement a method in terms of the implementation of its
superclass.
S3 &amp;amp; S4


super() performs a similar role to NextMethod() in S3 or
methods::callNextMethod() in S4, but is much more explicit:
The super class that super() will use is known when write super()
(i.e. statically) as opposed to when the generic is called
(i.e. dynamically).
All arguments to the generic are explicit; they are not automatically
passed along.


This makes super() more verbose, but substantially easier to
understand and reason about.



super() in S3 generics


Note that you can't use super() in methods for an S3 generic.
For example, imagine that you have made a subclass of &quot;integer&quot;:
myint &amp;lt;- new_class(&quot;myint&quot;, parent = class_integer, package = NULL)

Now you go to write a custom print method:
method(print, myint) &amp;lt;- function(x, ...) {
   cat(&quot;&amp;lt;myint&amp;gt;&quot;)
   print(super(x, to = class_integer))
}

myint(10L)
#&amp;gt; &amp;lt;myint&amp;gt;super(&amp;lt;myint&amp;gt;, &amp;lt;integer&amp;gt;)

This doesn't work because print() isn't an S7 generic so doesn't
understand how to interpret the special object that super() produces.
While you could resolve this problem with NextMethod() (because S7 is
implemented on top of S3), we instead recommend using S7_data() to extract
the underlying base object:
method(print, myint) &amp;lt;- function(x, ...) {
   cat(&quot;&amp;lt;myint&amp;gt;&quot;)
   print(S7_data(x))
}

myint(10L)
#&amp;gt; &amp;lt;myint&amp;gt;[1] 10


"><meta property="og:description" content="super(from, to) causes the dispatch for the next generic to use the method
for the superclass to instead of the actual class of from. It's needed
when you want to implement a method in terms of the implementation of its
superclass.
S3 &amp;amp; S4


super() performs a similar role to NextMethod() in S3 or
methods::callNextMethod() in S4, but is much more explicit:
The super class that super() will use is known when write super()
(i.e. statically) as opposed to when the generic is called
(i.e. dynamically).
All arguments to the generic are explicit; they are not automatically
passed along.


This makes super() more verbose, but substantially easier to
understand and reason about.



super() in S3 generics


Note that you can't use super() in methods for an S3 generic.
For example, imagine that you have made a subclass of &quot;integer&quot;:
myint &amp;lt;- new_class(&quot;myint&quot;, parent = class_integer, package = NULL)

Now you go to write a custom print method:
method(print, myint) &amp;lt;- function(x, ...) {
   cat(&quot;&amp;lt;myint&amp;gt;&quot;)
   print(super(x, to = class_integer))
}

myint(10L)
#&amp;gt; &amp;lt;myint&amp;gt;super(&amp;lt;myint&amp;gt;, &amp;lt;integer&amp;gt;)

This doesn't work because print() isn't an S7 generic so doesn't
understand how to interpret the special object that super() produces.
While you could resolve this problem with NextMethod() (because S7 is
implemented on top of S3), we instead recommend using S7_data() to extract
the underlying base object:
method(print, myint) &amp;lt;- function(x, ...) {
   cat(&quot;&amp;lt;myint&amp;gt;&quot;)
   print(S7_data(x))
}

myint(10L)
#&amp;gt; &amp;lt;myint&amp;gt;[1] 10


"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">S7</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/S7.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/generics-methods.html">Generics and methods</a></li>
    <li><a class="dropdown-item" href="../articles/classes-objects.html">Classes and objects</a></li>
    <li><a class="dropdown-item" href="../articles/compatibility.html">Compatibility with S3 and S4</a></li>
    <li><a class="dropdown-item" href="../articles/packages.html">Using S7 in a package</a></li>
    <li><a class="dropdown-item" href="../articles/motivation.html">Motivation for S7</a></li>
    <li><a class="dropdown-item" href="../articles/performance.html">Performance</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rconsortium/S7/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Force method dispatch to use a superclass</h1>
      <small class="dont-index">Source: <a href="https://github.com/rconsortium/S7/blob/main/R/super.R" class="external-link"><code>R/super.R</code></a></small>
      <div class="d-none name"><code>super.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>super(from, to)</code> causes the dispatch for the next generic to use the method
for the superclass <code>to</code> instead of the actual class of <code>from</code>. It's needed
when you want to implement a method in terms of the implementation of its
superclass.</p><div class="section">
<h3 id="s-amp-s-">S3 &amp; S4<a class="anchor" aria-label="anchor" href="#s-amp-s-"></a></h3>


<p><code>super()</code> performs a similar role to <code><a href="https://rdrr.io/r/base/UseMethod.html" class="external-link">NextMethod()</a></code> in S3 or
<code><a href="https://rdrr.io/r/methods/NextMethod.html" class="external-link">methods::callNextMethod()</a></code> in S4, but is much more explicit:</p><ul><li><p>The super class that <code>super()</code> will use is known when write <code>super()</code>
(i.e. statically) as opposed to when the generic is called
(i.e. dynamically).</p></li>
<li><p>All arguments to the generic are explicit; they are not automatically
passed along.</p></li>
</ul><p>This makes <code>super()</code> more verbose, but substantially easier to
understand and reason about.</p>
</div>

<div class="section">
<h3 id="super-in-s-generics"><code>super()</code> in S3 generics<a class="anchor" aria-label="anchor" href="#super-in-s-generics"></a></h3>


<p>Note that you can't use <code>super()</code> in methods for an S3 generic.
For example, imagine that you have made a subclass of "integer":</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">myint</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/new_class.html">new_class</a></span><span class="op">(</span><span class="st">"myint"</span>, parent <span class="op">=</span> <span class="va">class_integer</span>, package <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre><p></p></div>
<p>Now you go to write a custom print method:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/method.html">method</a></span><span class="op">(</span><span class="va">print</span>, <span class="va">myint</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"&lt;myint&gt;"</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="../reference/super.html">super</a></span><span class="op">(</span><span class="va">x</span>, to <span class="op">=</span> <span class="va">class_integer</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">myint</span><span class="op">(</span><span class="fl">10L</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;myint&gt;super(&lt;myint&gt;, &lt;integer&gt;)</span></span></code></pre><p></p></div>
<p>This doesn't work because <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> isn't an S7 generic so doesn't
understand how to interpret the special object that <code>super()</code> produces.
While you could resolve this problem with <code><a href="https://rdrr.io/r/base/UseMethod.html" class="external-link">NextMethod()</a></code> (because S7 is
implemented on top of S3), we instead recommend using <code><a href="S7_data.html">S7_data()</a></code> to extract
the underlying base object:</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="fu"><a href="../reference/method.html">method</a></span><span class="op">(</span><span class="va">print</span>, <span class="va">myint</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">"&lt;myint&gt;"</span><span class="op">)</span></span>
<span>   <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="../reference/S7_data.html">S7_data</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu">myint</span><span class="op">(</span><span class="fl">10L</span><span class="op">)</span></span>
<span><span class="co">#&gt; &lt;myint&gt;[1] 10</span></span></code></pre><p></p></div>
</div>

    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">super</span><span class="op">(</span><span class="va">from</span>, <span class="va">to</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-from">from<a class="anchor" aria-label="anchor" href="#arg-from"></a></dt>
<dd><p>An S7 object to cast.</p></dd>


<dt id="arg-to">to<a class="anchor" aria-label="anchor" href="#arg-to"></a></dt>
<dd><p>An S7 class specification, passed to <code><a href="as_class.html">as_class()</a></code>. Must be a
superclass of <code>object</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An <code>S7_super</code> object which should always be passed
immediately to a generic. It has no other special behavior.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">foo1</span> <span class="op">&lt;-</span> <span class="fu"><a href="new_class.html">new_class</a></span><span class="op">(</span><span class="st">"foo1"</span>, properties <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">class_numeric</span>, y <span class="op">=</span> <span class="va">class_numeric</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">foo2</span> <span class="op">&lt;-</span> <span class="fu"><a href="new_class.html">new_class</a></span><span class="op">(</span><span class="st">"foo2"</span>, <span class="va">foo1</span>, properties <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>z <span class="op">=</span> <span class="va">class_numeric</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">total</span> <span class="op">&lt;-</span> <span class="fu"><a href="new_generic.html">new_generic</a></span><span class="op">(</span><span class="st">"total"</span>, <span class="st">"x"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="method.html">method</a></span><span class="op">(</span><span class="va">total</span>, <span class="va">foo1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">@</span><span class="va">x</span> <span class="op">+</span> <span class="va">x</span><span class="op">@</span><span class="va">y</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># This won't work because it'll be stuck in an infinite loop:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="method.html">method</a></span><span class="op">(</span><span class="va">total</span>, <span class="va">foo2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">total</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">+</span> <span class="va">x</span><span class="op">@</span><span class="va">z</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We could write</span></span></span>
<span class="r-in"><span><span class="fu"><a href="method.html">method</a></span><span class="op">(</span><span class="va">total</span>, <span class="va">foo2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">@</span><span class="va">x</span> <span class="op">+</span> <span class="va">x</span><span class="op">@</span><span class="va">y</span> <span class="op">+</span> <span class="va">x</span><span class="op">@</span><span class="va">z</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Overwriting method total(&lt;foo2&gt;)</span>
<span class="r-in"><span><span class="co"># but then we'd need to remember to update it if the implementation</span></span></span>
<span class="r-in"><span><span class="co"># for total(&lt;foo1&gt;) ever changed.</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># So instead we use `super()` to call the method for the parent class:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="method.html">method</a></span><span class="op">(</span><span class="va">total</span>, <span class="va">foo2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">total</span><span class="op">(</span><span class="fu">super</span><span class="op">(</span><span class="va">x</span>, to <span class="op">=</span> <span class="va">foo1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="va">x</span><span class="op">@</span><span class="va">z</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Overwriting method total(&lt;foo2&gt;)</span>
<span class="r-in"><span><span class="fu">total</span><span class="op">(</span><span class="fu">foo2</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 6</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># To see the difference between convert() and super() we need a</span></span></span>
<span class="r-in"><span><span class="co"># method that calls another generic</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">bar1</span> <span class="op">&lt;-</span> <span class="fu"><a href="new_generic.html">new_generic</a></span><span class="op">(</span><span class="st">"bar1"</span>, <span class="st">"x"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="method.html">method</a></span><span class="op">(</span><span class="va">bar1</span>, <span class="va">foo1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="fu"><a href="method.html">method</a></span><span class="op">(</span><span class="va">bar1</span>, <span class="va">foo2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fl">2</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">bar2</span> <span class="op">&lt;-</span> <span class="fu"><a href="new_generic.html">new_generic</a></span><span class="op">(</span><span class="st">"bar2"</span>, <span class="st">"x"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="method.html">method</a></span><span class="op">(</span><span class="va">bar2</span>, <span class="va">foo1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu">bar1</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="method.html">method</a></span><span class="op">(</span><span class="va">bar2</span>, <span class="va">foo2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>, <span class="fu">bar1</span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">obj</span> <span class="op">&lt;-</span> <span class="fu">foo2</span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">bar2</span><span class="op">(</span><span class="va">obj</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2 2</span>
<span class="r-in"><span><span class="co"># convert() affects every generic:</span></span></span>
<span class="r-in"><span><span class="fu">bar2</span><span class="op">(</span><span class="fu"><a href="convert.html">convert</a></span><span class="op">(</span><span class="va">obj</span>, to <span class="op">=</span> <span class="va">foo1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 1</span>
<span class="r-in"><span><span class="co"># super() only affects the _next_ call to a generic:</span></span></span>
<span class="r-in"><span><span class="fu">bar2</span><span class="op">(</span><span class="fu">super</span><span class="op">(</span><span class="va">obj</span>, to <span class="op">=</span> <span class="va">foo1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 2</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Davis Vaughan, Jim Hester, Tomasz Kalinowski, Will Landau, Michael Lawrence, Martin Maechler, Luke Tierney, Hadley Wickham.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

